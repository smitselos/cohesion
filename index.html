<!DOCTYPE html>
<html lang="el">
<head>
<meta charset="UTF-8">
<title>Î£Ï…Î½Î¿Ï‡Î® & Î£Ï…Î½ÎµÎºÏ„Î¹ÎºÏŒÏ„Î·Ï„Î±</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root{
    --blue:#1e3a8a;
    --blue-soft:#eef2ff;
}
body{
    font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    background:#f5f7fb;
    margin:0;
}

/* HEADER */
.header{
    background:var(--blue);
    color:white;
    padding:14px 20px;
    display:flex;
    justify-content:space-between;
    align-items:center;
}
.header h1{
    font-size:1.2rem;
    margin:0;
    font-weight:600;
}
.home-btn{
    background:transparent;
    border:none;
    color:white;
    font-size:1.4rem;
    cursor:pointer;
}

/* MAIN */
.main{
    padding:20px;
}
.card{
    max-width:900px;
    margin:0 auto 20px;
    background:#fff;
    border-radius:14px;
    padding:20px;
    box-shadow:0 4px 16px rgba(0,0,0,.08);
}
h2{margin-top:0}

button{
    padding:12px 18px;
    border-radius:10px;
    border:none;
    cursor:pointer;
    font-size:1rem;
}
.primary{background:#4f46e5;color:#fff}
.secondary{background:#64748b;color:#fff}
.choice{
    background:var(--blue-soft);
    border:2px solid #c7d2fe;
    margin:6px 0;
    width:100%;
    text-align:left;
}
.choice.correct{background:#16a34a;color:#fff}
.choice.wrong{background:#dc2626;color:#fff}
.choice.disabled{pointer-events:none; opacity:0.9}

.grid{
    display:grid;
    grid-template-columns:repeat(auto-fit,minmax(160px,1fr));
    gap:10px;
}
.notice{
    background:#fffbeb;
    border:1px solid #facc15;
    padding:12px;
    border-radius:10px;
    margin-top:15px;
}
.back{margin-top:20px}

/* FOOTER */
.footer{
    background:var(--blue);
    color:rgba(255,255,255,.7);
    font-size:0.75rem;
    padding:10px 20px;
    text-align:center;
}
</style>
</head>

<body>

<div class="header">
    <h1>Î£Ï…Î½Î¿Ï‡Î® & Î£Ï…Î½ÎµÎºÏ„Î¹ÎºÏŒÏ„Î·Ï„Î±</h1>
    <button class="home-btn" onclick="renderHome()" title="Î‘ÏÏ‡Î¹ÎºÎ®">âŒ‚</button>
</div>

<div class="main" id="app"></div>

<div class="footer">
    ğŸ“‹ ÎÎµÎ¿ÎµÎ»Î»Î·Î½Î¹ÎºÎ® Î“Î»ÏÏƒÏƒÎ± &amp; Î›Î¿Î³Î¿Ï„ÎµÏ‡Î½Î¯Î± â€“ Î‘ &amp; Î£ ÎœÎ·Ï„ÏƒÎ­Î»Î¿Ï‚ 2026
</div>

<script>
/* ================= CSV URL ================= */
const CSV_URL =
'https://docs.google.com/spreadsheets/d/e/2PACX-1vSBmZdhLakrSUcbxWqSdNo5O07jxI7YRJ_J890qyb-u0qqoOqe1RMl18UQx0SFbLBo2Ihdm6gOOnelY/pub?output=csv';

/* ================= STATE ================= */
let allData=[],questions=[],index=0;
let selectedLevel=null,selectedCount=null,answered=false;

/* ================= CSV PARSER ================= */
function parseCSV(text){
    const rows=[];let row=[],cur='',q=false;
    for(let i=0;i<text.length;i++){
        const c=text[i],n=text[i+1];
        if(c=='"'&&q&&n=='"'){cur+='"';i++}
        else if(c=='"'){q=!q}
        else if(c==','&&!q){row.push(cur);cur=''}
        else if((c=='\n'||c=='\r')&&!q){
            if(cur||row.length){row.push(cur);rows.push(row)}
            row=[];cur=''
        } else cur+=c;
    }
    if(cur||row.length){row.push(cur);rows.push(row)}
    const h=rows.shift();
    return rows.map(r=>{
        let o={};h.forEach((x,i)=>o[x]=r[i]||'');return o;
    });
}

/* ================= LOAD ================= */
async function loadData(){
    const r=await fetch(CSV_URL);
    allData=parseCSV(await r.text());
    renderHome();
}

/* ================= HOME ================= */
function renderHome(){
    selectedLevel=null;selectedCount=null;
    document.getElementById('app').innerHTML=`
    <div class="card">
        <h2>Î•Ï€Î¹Î»Î¿Î³Î® Î•Ï€Î¹Ï€Î­Î´Î¿Ï…</h2>
        <div class="grid">
            <button class="primary" onclick="selectLevel(1)">Î•Ï€Î¯Ï€ÎµÎ´Î¿ 1</button>
            <button class="primary" onclick="selectLevel(2)">Î•Ï€Î¯Ï€ÎµÎ´Î¿ 2</button>
            <button class="primary" onclick="selectLevel(3)">Î•Ï€Î¯Ï€ÎµÎ´Î¿ 3</button>
            <button class="primary" onclick="selectLevel(4)">Î•Ï€Î¯Ï€ÎµÎ´Î¿ 4</button>
            <button class="secondary" onclick="selectLevel('mixed')">ÎœÎ¹ÎºÏ„ÏŒ</button>
        </div>

        <h2 style="margin-top:20px">Î‘ÏÎ¹Î¸Î¼ÏŒÏ‚ Î‘ÏƒÎºÎ®ÏƒÎµÏ‰Î½</h2>
        <div class="grid">
            <button class="choice" onclick="selectCount(1)">1 (Î Î±ÏÎ¬Î´ÎµÎ¹Î³Î¼Î±)</button>
            <button class="choice" onclick="selectCount(10)">10 (Î•Î¾Î¬ÏƒÎºÎ·ÏƒÎ·)</button>
            <button class="choice" onclick="selectCount('all')">ÎŒÎ»ÎµÏ‚ (Î•Ï€Î±Î½Î¬Î»Î·ÏˆÎ·)</button>
        </div>
    </div>`;
}

function selectLevel(l){selectedLevel=l}
function selectCount(c){
    if(selectedLevel===null){alert('Î”Î¹Î¬Î»ÎµÎ¾Îµ Ï€ÏÏÏ„Î± ÎµÏ€Î¯Ï€ÎµÎ´Î¿');return}
    selectedCount=c;startQuiz();
}

/* ================= QUIZ ================= */
function startQuiz(){
    let pool=[...allData];
    if(selectedLevel!=='mixed'){
        const m={1:'multiple_choice',2:'fill_gap',3:'matching',4:'pick_words'};
        pool=pool.filter(q=>q.question_type===m[selectedLevel]);
    }
    if(selectedCount!=='all') pool=pool.slice(0,selectedCount);
    questions=pool;index=0;renderQuestion();
}

function renderQuestion(){
    answered=false;
    const q=questions[index];
    document.getElementById('app').innerHTML=`
    <div class="card">
        <h2>Î†ÏƒÎºÎ·ÏƒÎ· ${index+1} / ${questions.length}</h2>
        <p><strong>${q.question}</strong></p>
        <p>${q.text}</p>
        <div>
            <button class="choice" onclick="check(this,1)">${q.option1}</button>
            <button class="choice" onclick="check(this,2)">${q.option2}</button>
            <button class="choice" onclick="check(this,3)">${q.option3}</button>
            <button class="choice" onclick="check(this,4)">${q.option4}</button>
        </div>
        <div id="feedback"></div>
    </div>`;
}

function check(btn,val){
    if(answered) return; answered=true;
    const q=questions[index];
    const correct=Number(String(q.answer).trim());
    document.querySelectorAll('.choice').forEach(b=>b.classList.add('disabled'));
    btn.classList.add(val===correct?'correct':'wrong');

    let fb='';
    if(q['Î Î±ÏÎ±Ï„Î·ÏÎ®ÏƒÎµÎ¹Ï‚']){
        fb+=`<div class="notice"><strong>Î Î±ÏÎ±Ï„Î®ÏÎ·ÏƒÎ·:</strong><br>${q['Î Î±ÏÎ±Ï„Î·ÏÎ®ÏƒÎµÎ¹Ï‚']}</div>`;
    }
    fb+=`<button class="primary back" onclick="next()">Î•Ï€ÏŒÎ¼ÎµÎ½Î· Î¬ÏƒÎºÎ·ÏƒÎ· â†’</button>`;
    document.getElementById('feedback').innerHTML=fb;
}

function next(){
    index++;
    if(index<questions.length) renderQuestion();
    else{alert('Î¤Î­Î»Î¿Ï‚ Î±ÏƒÎºÎ®ÏƒÎµÏ‰Î½');renderHome();}
}

loadData();
</script>

</body>
</html>
