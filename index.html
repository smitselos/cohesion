<!DOCTYPE html>
<html lang="el">
<head>
<meta charset="UTF-8">
<title>Î£Ï…Î½Î¿Ï‡Î® & Î£Ï…Î½ÎµÎºÏ„Î¹ÎºÏŒÏ„Î·Ï„Î±</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root{
    --primary:#4f46e5;
    --primary-hover:#3730a3;
    --primary-soft:#eef2ff;

    --success:#16a34a;
    --success-soft:#ecfdf5;

    --danger:#dc2626;
    --danger-soft:#fee2e2;

    --warning:#facc15;
    --warning-soft:#fffbeb;

    --text-main:#1e293b;
    --text-muted:#64748b;
    --border:#e2e8f0;

    --radius-lg:18px;
    --radius-md:14px;

    --shadow:0 6px 22px rgba(0,0,0,.08);
}

/* ===== Î’Î‘Î£Î— ===== */
html,body{
    height:100%;
    margin:0;
}
body{
    font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
    background:linear-gradient(135deg,#f8fafc,#e0e7ff);
    display:flex;
    align-items:center;
    justify-content:center;
    color:var(--text-main);
}

/* ===== Î•ÎÎ™Î‘Î™Î‘ ÎšÎ‘Î¡Î¤Î‘ ===== */
.app-card{
    background:white;
    width:100%;
    max-width:900px;
    min-height:100vh;
    display:flex;
    flex-direction:column;
    border-radius:var(--radius-lg);
    box-shadow:var(--shadow);
    overflow:hidden;
}

/* ===== HEADER (ÎœÎ•Î£Î‘ Î£Î¤Î—Î ÎšÎ‘Î¡Î¤Î‘) ===== */
.header{
    display:flex;
    justify-content:space-between;
    align-items:center;
    padding:24px;
    border-bottom:1px solid var(--border);
}
.header h1{
    margin:0;
    font-size:1.5rem;
    font-weight:600;
}
.subtitle{
    margin-top:4px;
    font-size:0.85rem;
    color:var(--text-muted);
}
.home-btn{
    background:var(--primary-soft);
    color:var(--primary);
    border:none;
    font-size:1.5rem;
    padding:8px 14px;
    border-radius:12px;
    cursor:pointer;
}
.home-btn:hover{
    background:var(--primary);
    color:white;
}

/* ===== Î Î•Î¡Î™Î•Î§ÎŸÎœÎ•ÎÎŸ ===== */
.main{
    flex:1;
    padding:28px;
}

/* ===== CARD Î•Î£Î©Î¤Î•Î¡Î™ÎšÎ•Î£ ===== */
.card{
    background:white;
    border-radius:var(--radius-md);
    padding:24px;
    box-shadow:0 2px 10px rgba(0,0,0,.06);
    margin-bottom:24px;
}

h2{
    margin-top:0;
    margin-bottom:14px;
}
p{ line-height:1.7 }

.grid{
    display:grid;
    grid-template-columns:repeat(auto-fit,minmax(160px,1fr));
    gap:12px;
}

/* ===== ÎšÎŸÎ¥ÎœÎ Î™Î‘ ===== */
button{
    padding:14px 18px;
    border-radius:14px;
    border:none;
    cursor:pointer;
    font-size:1rem;
}
.primary{
    background:var(--primary);
    color:white;
}
.primary:hover{
    background:var(--primary-hover);
}

.choice{
    background:white;
    border:2px solid var(--border);
    text-align:left;
    position:relative;
}
.choice:hover{
    border-color:#94a3b8;
}
.choice.correct{
    background:var(--success);
    color:white;
}
.choice.wrong{
    background:var(--danger);
    color:white;
}
.choice.disabled{
    pointer-events:none;
    opacity:.95;
}
.choice.correct::after,
.choice.wrong::after{
    position:absolute;
    top:8px;
    right:10px;
    font-weight:700;
}
.choice.correct::after{content:"âœ“";}
.choice.wrong::after{content:"âœ—";}

/* ===== FILL GAP ===== */
input[type="text"]{
    width:100%;
    padding:14px;
    font-size:1rem;
    border-radius:12px;
    border:2px solid #c7d2fe;
    margin-top:12px;
}
input.correct{
    border-color:var(--success);
    background:var(--success-soft);
}
input.wrong{
    border-color:var(--danger);
    background:var(--danger-soft);
}

/* ===== FEEDBACK ===== */
.notice{
    background:var(--warning-soft);
    border:1px solid var(--warning);
    padding:14px;
    border-radius:12px;
    margin-top:16px;
}
.correct-answer-box{
    background:var(--success-soft);
    border:1px solid var(--success);
    padding:12px;
    border-radius:12px;
    margin-top:14px;
}

.next-btn{
    background:var(--primary);
    color:white;
    width:100%;
    margin-top:28px;
    padding:16px;
    border-radius:16px;
}
.next-btn:hover{
    background:var(--primary-hover);
}

/* ===== FOOTER (ÎœÎ•Î£Î‘ Î£Î¤Î—Î ÎšÎ‘Î¡Î¤Î‘) ===== */
.footer{
    border-top:1px solid var(--border);
    padding:12px 20px;
    font-size:0.75rem;
    color:var(--text-muted);
    text-align:center;
}
</style>
</head>

<body>

<div class="app-card">

    <div class="header">
        <div>
            <h1>Î£Ï…Î½Î¿Ï‡Î® & Î£Ï…Î½ÎµÎºÏ„Î¹ÎºÏŒÏ„Î·Ï„Î±</h1>
            <div class="subtitle">ÎÎµÎ¿ÎµÎ»Î»Î·Î½Î¹ÎºÎ® Î“Î»ÏÏƒÏƒÎ± â€“ Î›ÏÎºÎµÎ¹Î¿</div>
        </div>
        <button class="home-btn" onclick="renderHome()">âŒ‚</button>
    </div>

    <div class="main" id="app"></div>

    <div class="footer">
        ğŸ“‹ ÎÎµÎ¿ÎµÎ»Î»Î·Î½Î¹ÎºÎ® Î“Î»ÏÏƒÏƒÎ± &amp; Î›Î¿Î³Î¿Ï„ÎµÏ‡Î½Î¯Î± â€“ Î‘ &amp; Î£ ÎœÎ·Ï„ÏƒÎ­Î»Î¿Ï‚ 2026
    </div>

</div>

<script>
const CSV_URL =
'https://docs.google.com/spreadsheets/d/e/2PACX-1vSBmZdhLakrSUcbxWqSdNo5O07jxI7YRJ_J890qyb-u0qqoOqe1RMl18UQx0SFbLBo2Ihdm6gOOnelY/pub?output=csv';

let allData=[],questions=[],index=0;
let selectedLevel=null,selectedCount=null,answered=false;

function parseCSV(t){
    const r=[];let row=[],c='',q=false;
    for(let i=0;i<t.length;i++){
        const ch=t[i],n=t[i+1];
        if(ch=='"'&&q&&n=='"'){c+='"';i++}
        else if(ch=='"'){q=!q}
        else if(ch==','&&!q){row.push(c);c=''}
        else if((ch=='\n'||ch=='\r')&&!q){
            if(c||row.length){row.push(c);r.push(row)}
            row=[];c=''
        } else c+=ch;
    }
    if(c||row.length){row.push(c);r.push(row)}
    const h=r.shift();
    return r.map(x=>{let o={};h.forEach((k,i)=>o[k]=x[i]||'');return o});
}
function normalize(s){
    return s.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").trim();
}
async function loadData(){
    const res=await fetch(CSV_URL);
    allData=parseCSV(await res.text());
    renderHome();
}
function renderHome(){
    selectedLevel=null;selectedCount=null;
    document.getElementById('app').innerHTML=`
    <div class="card">
        <h2>Î•Ï€Î¹Î»Î¿Î³Î® Î•Ï€Î¹Ï€Î­Î´Î¿Ï…</h2>
        <div class="grid">
            <button class="primary" onclick="selectLevel(1)">Î•Ï€Î¯Ï€ÎµÎ´Î¿ 1</button>
            <button class="primary" onclick="selectLevel(2)">Î•Ï€Î¯Ï€ÎµÎ´Î¿ 2</button>
        </div>

        <h2 style="margin-top:24px">Î‘ÏÎ¹Î¸Î¼ÏŒÏ‚ Î‘ÏƒÎºÎ®ÏƒÎµÏ‰Î½</h2>
        <div class="grid">
            <button class="choice" onclick="selectCount(1)">1</button>
            <button class="choice" onclick="selectCount(10)">10</button>
            <button class="choice" onclick="selectCount('all')">ÎŒÎ»ÎµÏ‚</button>
        </div>
    </div>`;
}
function selectLevel(l){selectedLevel=l}
function selectCount(c){
    if(selectedLevel===null){alert('Î”Î¹Î¬Î»ÎµÎ¾Îµ Ï€ÏÏÏ„Î± ÎµÏ€Î¯Ï€ÎµÎ´Î¿');return}
    selectedCount=c;
    startQuiz();
}
function startQuiz(){
    const map={1:'multiple_choice',2:'fill_gap'};
    let pool=allData.filter(q=>q.question_type===map[selectedLevel]);
    if(selectedCount!=='all') pool=pool.slice(0,selectedCount);
    questions=pool;
    index=0;
    renderQuestion();
}
function renderQuestion(){
    answered=false;
    const q=questions[index];
    let html=`
    <div class="card">
        <h2>Î†ÏƒÎºÎ·ÏƒÎ· ${index+1} / ${questions.length}</h2>
        <p><strong>${q.question}</strong></p>
        <p>${q.text}</p>
    `;
    if(q.question_type==='multiple_choice'){
        html+=`
        <button class="choice" onclick="checkMC(this,1)">${q.option1}</button>
        <button class="choice" onclick="checkMC(this,2)">${q.option2}</button>
        <button class="choice" onclick="checkMC(this,3)">${q.option3}</button>
        <button class="choice" onclick="checkMC(this,4)">${q.option4}</button>`;
    }
    if(q.question_type==='fill_gap'){
        html+=`
        <input type="text" id="gapInput" placeholder="Î“ÏÎ¬ÏˆÎµ Ï„Î· Î»Î­Î¾Î·">
        <button class="primary" onclick="checkGap()">ÎˆÎ»ÎµÎ³Ï‡Î¿Ï‚</button>`;
    }
    html+=`<div id="feedback"></div></div>`;
    document.getElementById('app').innerHTML=html;
}
function checkMC(btn,val){
    if(answered) return;
    answered=true;
    const q=questions[index];
    const correct=Number(q.answer);
    const buttons=document.querySelectorAll('.choice');
    buttons.forEach(b=>b.classList.add('disabled'));
    if(val===correct){btn.classList.add('correct')}
    else{
        btn.classList.add('wrong');
        buttons[correct-1].classList.add('correct');
    }
    showFeedback(q);
}
function checkGap(){
    if(answered) return;
    answered=true;
    const q=questions[index];
    const input=document.getElementById('gapInput');
    const ok = normalize(input.value)===normalize(q.answer);
    input.classList.add(ok?'correct':'wrong');
    showFeedback(q, ok);
}
function showFeedback(q,ok=true){
    let fb='';
    if(!ok && q.question_type==='fill_gap'){
        fb+=`<div class="correct-answer-box"><strong>Î£Ï‰ÏƒÏ„Î® Î±Ï€Î¬Î½Ï„Î·ÏƒÎ·:</strong> ${q.answer}</div>`;
    }
    if(q['Î Î±ÏÎ±Ï„Î·ÏÎ®ÏƒÎµÎ¹Ï‚']){
        fb+=`<div class="notice"><strong>Î Î±ÏÎ±Ï„Î®ÏÎ·ÏƒÎ·:</strong><br>${q['Î Î±ÏÎ±Ï„Î·ÏÎ®ÏƒÎµÎ¹Ï‚']}</div>`;
    }
    fb+=`<button class="next-btn" onclick="next()">Î•Ï€ÏŒÎ¼ÎµÎ½Î· ÎµÏÏÏ„Î·ÏƒÎ· â†’</button>`;
    document.getElementById('feedback').innerHTML=fb;
}
function next(){
    index++;
    if(index<questions.length) renderQuestion();
    else renderHome();
}
loadData();
</script>

</body>
</html>
