<!DOCTYPE html>
<html lang="el">
<head>
<meta charset="UTF-8">
<title>Î£Ï…Î½Î¿Ï‡Î® & Î£Ï…Î½ÎµÎºÏ„Î¹ÎºÏŒÏ„Î·Ï„Î±</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root{
  --primary:#4f46e5;
  --primary-hover:#3730a3;
  --primary-soft:#eef2ff;
  --pink-soft:#faf5ff;

  --success:#16a34a;
  --success-soft:#ecfdf5;

  --danger:#dc2626;
  --danger-soft:#fee2e2;

  --warning:#facc15;
  --warning-soft:#fffbeb;

  --text-main:#1e293b;
  --text-muted:#64748b;
  --border:#e2e8f0;

  --radius-lg:18px;
  --radius-md:14px;
  --shadow:0 6px 22px rgba(0,0,0,.08);
}

html,body{
  height:100%;
  margin:0;
}
body{
  font-family:system-ui,-apple-system,"Segoe UI",sans-serif;
  background:linear-gradient(135deg,#f8fafc,#e0e7ff);
  display:flex;
  align-items:center;
  justify-content:center;
  color:var(--text-main);
}

/* MAIN CARD */
.app-card{
  background:white;
  width:100%;
  max-width:900px;
  min-height:100vh;
  display:flex;
  flex-direction:column;
  border-radius:var(--radius-lg);
  box-shadow:var(--shadow);
  overflow:hidden;
}

/* HEADER */
.header-card{
  padding:22px 24px;
  border-bottom:1px solid var(--border);
  display:flex;
  justify-content:space-between;
  align-items:center;
}
.header-card h1{
  margin:0;
  font-size:1.45rem;
}
.header-meta{
  font-size:.85rem;
  color:var(--text-muted);
}
.home-btn{
  background:var(--primary-soft);
  color:var(--primary);
  border:none;
  font-size:1.4rem;
  padding:8px 14px;
  border-radius:12px;
  cursor:pointer;
}
.home-btn:hover{
  background:var(--primary);
  color:white;
}

/* CONTENT */
.main{
  flex:1;
  padding:28px;
}

/* SUB CARDS */
.sub-card{
  background:white;
  border-radius:var(--radius-md);
  padding:20px;
  box-shadow:0 2px 10px rgba(0,0,0,.06);
  margin-bottom:20px;
}

.text-card{
  background:#f8fafc;
  border-left:4px solid var(--primary);
}
.options-card{
  background:var(--pink-soft);
  border:1px solid #e9d5ff;
}
.feedback-card{
  background:var(--warning-soft);
  border:1px solid var(--warning);
}
.correct-card{
  background:var(--success-soft);
  border:1px solid var(--success);
}

/* BUTTONS */
button{
  padding:14px 18px;
  border-radius:14px;
  border:none;
  cursor:pointer;
  font-size:1rem;
}
.primary{
  background:var(--primary);
  color:white;
}
.primary:hover{
  background:var(--primary-hover);
}
.choice{
  background:white;
  border:2px solid var(--border);
  width:100%;
  text-align:left;
  margin-bottom:10px;
  position:relative;
}
.choice.correct{background:var(--success);color:white;}
.choice.wrong{background:var(--danger);color:white;}
.choice.disabled{pointer-events:none;}
.choice.correct::after,
.choice.wrong::after{
  position:absolute;
  top:8px;
  right:10px;
  font-weight:700;
}
.choice.correct::after{content:"âœ“";}
.choice.wrong::after{content:"âœ—";}

input[type="text"]{
  width:100%;
  padding:14px;
  font-size:1rem;
  border-radius:12px;
  border:2px solid #c7d2fe;
}
input.correct{background:var(--success-soft);border-color:var(--success);}
input.wrong{background:var(--danger-soft);border-color:var(--danger);}

/* ACTION */
.next-btn{
  width:100%;
  background:var(--primary);
  color:white;
  padding:16px;
  border-radius:16px;
}
.next-btn:hover{background:var(--primary-hover);}

/* FOOTER */
.footer{
  border-top:1px solid var(--border);
  padding:12px;
  font-size:.75rem;
  color:var(--text-muted);
  text-align:center;
}
</style>
</head>

<body>

<div class="app-card">

<div class="header-card">
  <div>
    <h1>Î£Ï…Î½Î¿Ï‡Î® & Î£Ï…Î½ÎµÎºÏ„Î¹ÎºÏŒÏ„Î·Ï„Î±</h1>
    <div class="header-meta" id="counter">ÎÎµÎ¿ÎµÎ»Î»Î·Î½Î¹ÎºÎ® Î“Î»ÏÏƒÏƒÎ± â€“ Î›ÏÎºÎµÎ¹Î¿</div>
  </div>
  <button class="home-btn" onclick="renderHome()">âŒ‚</button>
</div>

<div class="main" id="app"></div>

<div class="footer">
ğŸ“‹ ÎÎµÎ¿ÎµÎ»Î»Î·Î½Î¹ÎºÎ® Î“Î»ÏÏƒÏƒÎ± &amp; Î›Î¿Î³Î¿Ï„ÎµÏ‡Î½Î¯Î± â€“ Î‘ &amp; Î£ ÎœÎ·Ï„ÏƒÎ­Î»Î¿Ï‚ 2026
</div>

</div>

<script>
const CSV_URL='https://docs.google.com/spreadsheets/d/e/2PACX-1vSBmZdhLakrSUcbxWqSdNo5O07jxI7YRJ_J890qyb-u0qqoOqe1RMl18UQx0SFbLBo2Ihdm6gOOnelY/pub?output=csv';

let allData=[],questions=[],wrongQuestions=[];
let index=0,correctCount=0,answered=false;

function parseCSV(t){
  const r=[],h=[];
  let row=[],c='',q=false;
  for(let i=0;i<t.length;i++){
    const ch=t[i],n=t[i+1];
    if(ch=='"'&&q&&n=='"'){c+='"';i++}
    else if(ch=='"'){q=!q}
    else if(ch==','&&!q){row.push(c);c=''}
    else if((ch=='\n'||ch=='\r')&&!q){
      if(c||row.length){row.push(c);r.push(row)}
      row=[];c=''
    } else c+=ch;
  }
  if(c||row.length){row.push(c);r.push(row)}
  const head=r.shift();
  return r.map(x=>{let o={};head.forEach((k,i)=>o[k]=x[i]||'');return o});
}
function normalize(s){
  return s.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").trim();
}
async function loadData(){
  const res=await fetch(CSV_URL);
  allData=parseCSV(await res.text());
  renderHome();
}

function renderHome(){
  index=0;correctCount=0;wrongQuestions=[];
  document.getElementById('counter').textContent='ÎÎµÎ¿ÎµÎ»Î»Î·Î½Î¹ÎºÎ® Î“Î»ÏÏƒÏƒÎ± â€“ Î›ÏÎºÎµÎ¹Î¿';
  document.getElementById('app').innerHTML=`
    <div class="sub-card">
      <h2>ÎˆÎ½Î±ÏÎ¾Î· Î±ÏƒÎºÎ®ÏƒÎµÏ‰Î½</h2>
      <button class="primary" onclick="start()">ÎÎµÎºÎ¯Î½Î±</button>
    </div>`;
}

function start(){
  questions=[...allData];
  renderQuestion();
}

function renderQuestion(){
  answered=false;
  const q=questions[index];
  document.getElementById('counter').textContent=`Î†ÏƒÎºÎ·ÏƒÎ· ${index+1} / ${questions.length}`;
  let html=`
    <div class="sub-card text-card">${q.text}</div>
    <div class="sub-card"><strong>${q.question}</strong></div>
  `;
  if(q.question_type==='multiple_choice'){
    html+=`<div class="sub-card options-card">`;
    [q.option1,q.option2,q.option3,q.option4].forEach((o,i)=>{
      html+=`<button class="choice" onclick="checkMC(this,${i+1})">${o}</button>`;
    });
    html+=`</div>`;
  } else {
    html+=`
      <div class="sub-card options-card">
        <input type="text" id="gap">
        <button class="primary" onclick="checkGap()">ÎˆÎ»ÎµÎ³Ï‡Î¿Ï‚</button>
      </div>`;
  }
  html+=`<div id="feedback"></div>`;
  document.getElementById('app').innerHTML=html;
}

function checkMC(btn,val){
  if(answered) return;
  answered=true;
  const q=questions[index];
  const correct=Number(q.answer);
  document.querySelectorAll('.choice').forEach(b=>b.classList.add('disabled'));
  if(val===correct){
    btn.classList.add('correct');correctCount++;
  }else{
    btn.classList.add('wrong');
    document.querySelectorAll('.choice')[correct-1].classList.add('correct');
    wrongQuestions.push(q);
  }
  showFeedback(q);
}

function checkGap(){
  if(answered) return;
  answered=true;
  const q=questions[index];
  const input=document.getElementById('gap');
  const ok=normalize(input.value)===normalize(q.answer);
  input.classList.add(ok?'correct':'wrong');
  if(ok) correctCount++; else wrongQuestions.push(q);
  showFeedback(q,!ok);
}

function showFeedback(q,showCorrect){
  let fb='';
  if(showCorrect){
    fb+=`<div class="sub-card correct-card"><strong>Î£Ï‰ÏƒÏ„Î® Î±Ï€Î¬Î½Ï„Î·ÏƒÎ·:</strong> ${q.answer}</div>`;
  }
  if(q['Î Î±ÏÎ±Ï„Î·ÏÎ®ÏƒÎµÎ¹Ï‚']){
    fb+=`<div class="sub-card feedback-card">${q['Î Î±ÏÎ±Ï„Î·ÏÎ®ÏƒÎµÎ¹Ï‚']}</div>`;
  }
  fb+=`<button class="next-btn" onclick="next()">Î•Ï€ÏŒÎ¼ÎµÎ½Î·</button>`;
  document.getElementById('feedback').innerHTML=fb;
}

function next(){
  index++;
  if(index<questions.length) renderQuestion();
  else renderSummary();
}

function renderSummary(){
  document.getElementById('counter').textContent='Î‘Î½Î±Ï„ÏÎ¿Ï†Î¿Î´ÏŒÏ„Î·ÏƒÎ·';
  document.getElementById('app').innerHTML=`
    <div class="sub-card">
      <h2>Î’Î±Î¸Î¼ÏŒÏ‚</h2>
      <p><strong>${correctCount} / ${questions.length}</strong></p>
    </div>
    ${wrongQuestions.length?`
    <div class="sub-card">
      <button class="primary" onclick="repeatWrong()">ğŸ” Î•Ï€Î±Î½Î¬Î»Î·ÏˆÎ· Î»Î±Î½Î¸Î±ÏƒÎ¼Î­Î½Ï‰Î½</button>
    </div>`:''}
    <div class="sub-card">
      <button onclick="renderHome()">â¬… Î•Ï€Î¹ÏƒÏ„ÏÎ¿Ï†Î®</button>
    </div>`;
}

function repeatWrong(){
  questions=[...wrongQuestions];
  wrongQuestions=[];correctCount=0;index=0;
  renderQuestion();
}

loadData();
</script>

</body>
</html>
