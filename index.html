<!DOCTYPE html>
<html lang="el">
<head>
<meta charset="UTF-8">
<title>Î£Ï…Î½Î¿Ï‡Î® & Î£Ï…Î½ÎµÎºÏ„Î¹ÎºÏŒÏ„Î·Ï„Î±</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root{
    --blue:#1e3a8a;
    --blue-soft:#eef2ff;
    --green:#16a34a;
    --red:#dc2626;
}

/* ===== Î’Î‘Î£Î— ===== */
body{
    font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    background:#f5f7fb;
    margin:0;
}
.app-wrapper{
    max-width:900px;
    margin:0 auto;
}

/* ===== HEADER ===== */
.header{
    background:var(--blue);
    color:white;
    padding:16px 22px;
    display:flex;
    justify-content:space-between;
    align-items:center;
    border-radius:0 0 14px 14px;
}
.header h1{
    font-size:1.25rem;
    margin:0;
    font-weight:600;
}
.home-btn{
    background:rgba(255,255,255,0.15);
    border:none;
    color:white;
    font-size:1.8rem;          /* ÎœÎ•Î“Î‘Î›Î¥Î¤Î•Î¡ÎŸ */
    padding:6px 14px;
    border-radius:10px;
    cursor:pointer;
}
.home-btn:hover{
    background:rgba(255,255,255,0.25);
}

/* ===== ÎšÎ¥Î¡Î™ÎŸ ===== */
.main{ padding:22px 0; }

.card{
    background:#fff;
    border-radius:16px;
    padding:22px;
    box-shadow:0 4px 16px rgba(0,0,0,.08);
    margin-bottom:22px;
}

h2{margin-top:0}

.grid{
    display:grid;
    grid-template-columns:repeat(auto-fit,minmax(160px,1fr));
    gap:12px;
}

/* ===== ÎšÎŸÎ¥ÎœÎ Î™Î‘ ===== */
button{
    padding:14px 18px;
    border-radius:12px;
    border:none;
    cursor:pointer;
    font-size:1rem;
}
.primary{background:#4f46e5;color:#fff}
.choice{
    background:var(--blue-soft);
    border:2px solid #c7d2fe;
    width:100%;
    text-align:left;
    position:relative;
}

/* Ï€Î¿Î»Î»Î±Ï€Î»Î®Ï‚ ÎµÏ€Î¹Î»Î¿Î³Î®Ï‚ â€“ ÎºÎ±Ï„Î±ÏƒÏ„Î¬ÏƒÎµÎ¹Ï‚ */
.choice.correct{
    background:var(--green);
    color:white;
}
.choice.wrong{
    background:var(--red);
    color:white;
}
.choice.disabled{
    pointer-events:none;
    opacity:0.95;
}

/* ÎµÎ¹ÎºÎ¿Î½Î¯Î´Î¹Î± âœ“ / âœ— */
.choice.correct::after,
.choice.wrong::after{
    position:absolute;
    top:8px;
    right:10px;
    font-size:1.2rem;
    font-weight:700;
}
.choice.correct::after{content:"âœ“";}
.choice.wrong::after{content:"âœ—";}

/* ===== FILL GAP ===== */
input[type="text"]{
    width:100%;
    padding:12px;
    font-size:1rem;
    border-radius:10px;
    border:2px solid #c7d2fe;
    margin-top:10px;
}
input.correct{
    border-color:var(--green);
    background:#ecfdf5;
}
input.wrong{
    border-color:var(--red);
    background:#fee2e2;
}

/* ===== Î Î‘Î¡Î‘Î¤Î—Î¡Î—Î£Î•Î™Î£ / Î£Î©Î£Î¤Î— Î‘Î Î‘ÎÎ¤Î—Î£Î— ===== */
.notice{
    background:#fffbeb;
    border:1px solid #facc15;
    padding:12px;
    border-radius:10px;
    margin-top:14px;
}
.correct-answer-box{
    background:#ecfdf5;
    border:1px solid var(--green);
    padding:10px;
    border-radius:10px;
    margin-top:12px;
    font-size:0.95rem;
}

/* ===== Î•Î ÎŸÎœÎ•ÎÎ— Î•Î¡Î©Î¤Î—Î£Î— ===== */
.next-btn{
    background:var(--red);
    color:white;
    width:100%;
    margin-top:26px;      /* Î‘Î ÎŸÎ£Î¤Î‘Î£Î— */
    padding:16px;
    font-size:1.05rem;
    border-radius:14px;
}

/* ===== FOOTER ===== */
.footer{
    background:var(--blue);
    color:rgba(255,255,255,.7);
    font-size:0.75rem;
    padding:10px 20px;
    text-align:center;
    border-radius:14px 14px 0 0;
    margin-bottom:10px;
}
</style>
</head>

<body>

<div class="app-wrapper">

<div class="header">
    <h1>Î£Ï…Î½Î¿Ï‡Î® & Î£Ï…Î½ÎµÎºÏ„Î¹ÎºÏŒÏ„Î·Ï„Î±</h1>
    <button class="home-btn" onclick="renderHome()" title="Î‘ÏÏ‡Î¹ÎºÎ®">âŒ‚</button>
</div>

<div class="main" id="app"></div>

<div class="footer">
ğŸ“‹ ÎÎµÎ¿ÎµÎ»Î»Î·Î½Î¹ÎºÎ® Î“Î»ÏÏƒÏƒÎ± &amp; Î›Î¿Î³Î¿Ï„ÎµÏ‡Î½Î¯Î± â€“ Î‘ &amp; Î£ ÎœÎ·Ï„ÏƒÎ­Î»Î¿Ï‚ 2026
</div>

</div>

<script>
const CSV_URL =
'https://docs.google.com/spreadsheets/d/e/2PACX-1vSBmZdhLakrSUcbxWqSdNo5O07jxI7YRJ_J890qyb-u0qqoOqe1RMl18UQx0SFbLBo2Ihdm6gOOnelY/pub?output=csv';

let allData=[],questions=[],index=0;
let selectedLevel=null,selectedCount=null,answered=false;

/* ===== CSV PARSER ===== */
function parseCSV(t){
    const r=[];let row=[],c='',q=false;
    for(let i=0;i<t.length;i++){
        const ch=t[i],n=t[i+1];
        if(ch=='"'&&q&&n=='"'){c+='"';i++}
        else if(ch=='"'){q=!q}
        else if(ch==','&&!q){row.push(c);c=''}
        else if((ch=='\n'||ch=='\r')&&!q){
            if(c||row.length){row.push(c);r.push(row)}
            row=[];c=''
        } else c+=ch;
    }
    if(c||row.length){row.push(c);r.push(row)}
    const h=r.shift();
    return r.map(x=>{let o={};h.forEach((k,i)=>o[k]=x[i]||'');return o});
}

function normalize(s){
    return s.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").trim();
}

/* ===== LOAD ===== */
async function loadData(){
    const res=await fetch(CSV_URL);
    allData=parseCSV(await res.text());
    renderHome();
}

/* ===== HOME ===== */
function renderHome(){
    selectedLevel=null;selectedCount=null;
    document.getElementById('app').innerHTML=`
    <div class="card">
        <h2>Î•Ï€Î¹Î»Î¿Î³Î® Î•Ï€Î¹Ï€Î­Î´Î¿Ï…</h2>
        <div class="grid">
            <button class="primary" onclick="selectLevel(1)">Î•Ï€Î¯Ï€ÎµÎ´Î¿ 1</button>
            <button class="primary" onclick="selectLevel(2)">Î•Ï€Î¯Ï€ÎµÎ´Î¿ 2</button>
        </div>

        <h2 style="margin-top:22px">Î‘ÏÎ¹Î¸Î¼ÏŒÏ‚ Î‘ÏƒÎºÎ®ÏƒÎµÏ‰Î½</h2>
        <div class="grid">
            <button class="choice" onclick="selectCount(1)">1</button>
            <button class="choice" onclick="selectCount(10)">10</button>
            <button class="choice" onclick="selectCount('all')">ÎŒÎ»ÎµÏ‚</button>
        </div>
    </div>`;
}

function selectLevel(l){selectedLevel=l}
function selectCount(c){
    if(selectedLevel===null){alert('Î”Î¹Î¬Î»ÎµÎ¾Îµ Ï€ÏÏÏ„Î± ÎµÏ€Î¯Ï€ÎµÎ´Î¿');return}
    selectedCount=c;
    startQuiz();
}

/* ===== QUIZ ===== */
function startQuiz(){
    const map={1:'multiple_choice',2:'fill_gap'};
    let pool=allData.filter(q=>q.question_type===map[selectedLevel]);
    if(selectedCount!=='all') pool=pool.slice(0,selectedCount);
    questions=pool;
    index=0;
    renderQuestion();
}

function renderQuestion(){
    answered=false;
    const q=questions[index];
    let html=`
    <div class="card">
        <h2>Î†ÏƒÎºÎ·ÏƒÎ· ${index+1} / ${questions.length}</h2>
        <p><strong>${q.question}</strong></p>
        <p>${q.text}</p>
    `;

    if(q.question_type==='multiple_choice'){
        html+=`
        <button class="choice" onclick="checkMC(this,1)">${q.option1}</button>
        <button class="choice" onclick="checkMC(this,2)">${q.option2}</button>
        <button class="choice" onclick="checkMC(this,3)">${q.option3}</button>
        <button class="choice" onclick="checkMC(this,4)">${q.option4}</button>`;
    }

    if(q.question_type==='fill_gap'){
        html+=`
        <input type="text" id="gapInput" placeholder="Î“ÏÎ¬ÏˆÎµ Ï„Î· Î»Î­Î¾Î·">
        <button class="primary" onclick="checkGap()">ÎˆÎ»ÎµÎ³Ï‡Î¿Ï‚</button>`;
    }

    html+=`<div id="feedback"></div></div>`;
    document.getElementById('app').innerHTML=html;
}

/* ===== Î•Î›Î•Î“Î§ÎŸÎ™ ===== */
function checkMC(btn,val){
    if(answered) return;
    answered=true;

    const q=questions[index];
    const correct=Number(q.answer);

    const buttons=document.querySelectorAll('.choice');
    buttons.forEach(b=>b.classList.add('disabled'));

    if(val===correct){
        btn.classList.add('correct');
    }else{
        btn.classList.add('wrong');
        buttons[correct-1].classList.add('correct');
    }

    showFeedback(q);
}

function checkGap(){
    if(answered) return;
    answered=true;

    const q=questions[index];
    const input=document.getElementById('gapInput');
    const ok = normalize(input.value)===normalize(q.answer);

    input.classList.add(ok?'correct':'wrong');

    showFeedback(q, ok);
}

function showFeedback(q,ok=true){
    let fb='';

    if(!ok && q.question_type==='fill_gap'){
        fb+=`
        <div class="correct-answer-box">
            <strong>Î£Ï‰ÏƒÏ„Î® Î±Ï€Î¬Î½Ï„Î·ÏƒÎ·:</strong> ${q.answer}
        </div>`;
    }

    if(q['Î Î±ÏÎ±Ï„Î·ÏÎ®ÏƒÎµÎ¹Ï‚']){
        fb+=`
        <div class="notice">
            <strong>Î Î±ÏÎ±Ï„Î®ÏÎ·ÏƒÎ·:</strong><br>${q['Î Î±ÏÎ±Ï„Î·ÏÎ®ÏƒÎµÎ¹Ï‚']}
        </div>`;
    }

    fb+=`<button class="next-btn" onclick="next()">Î•Ï€ÏŒÎ¼ÎµÎ½Î· ÎµÏÏÏ„Î·ÏƒÎ· â†’</button>`;
    document.getElementById('feedback').innerHTML=fb;
}

function next(){
    index++;
    if(index<questions.length) renderQuestion();
    else renderHome();
}

loadData();
</script>

</body>
</html>
